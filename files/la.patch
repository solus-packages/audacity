From be15ddee889fd5fb3117df2b74837831cc023679 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Thomas=20Feh=C3=A9r?= <thomas.feher@yahoo.de>
Date: Fri, 12 Feb 2016 20:59:15 +0100
Subject: [PATCH 1/1] fix linking on linux

This was only working because g++ can be used to link C++ and
Objective-C object files. As soon as CXX is set to a different compiler
this failed on linux, trying to link objects compiled with a different
compiler.
---
 lib-src/FileDialog/Makefile.in | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/lib-src/FileDialog/Makefile.in b/lib-src/FileDialog/Makefile.in
index 52ce4c5..35dd3c0 100644
--- a/lib-src/FileDialog/Makefile.in
+++ b/lib-src/FileDialog/Makefile.in
@@ -216,6 +216,10 @@ OBJCXXLINK = $(LIBTOOL) $(AM_V_lt) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(OBJCXXLD) $(AM_OBJCXXFLAGS) $(OBJCXXFLAGS) \
 	$(AM_LDFLAGS) $(LDFLAGS) -o $@
 AM_V_OBJCXXLD = $(am__v_OBJCXXLD_@AM_V@)
+# Overwrite C++ variables with values for Objective-C, because in the end there
+# is only one linker command that should be configured correctly.
+@MAC_TRUE@CXXLINK = $(OBJCXXLINK)
+@MAC_TRUE@AM_V_CXXLD = $(AM_V_OBJCXXLD)
 am__v_OBJCXXLD_ = $(am__v_OBJCXXLD_@AM_DEFAULT_V@)
 am__v_OBJCXXLD_0 = @echo "  OBJCXXLD" $@;
 am__v_OBJCXXLD_1 = 
@@ -520,8 +524,8 @@ win/$(DEPDIR)/$(am__dirstamp):
 win/libFileDialog_la-FileDialogPrivate.lo: win/$(am__dirstamp) \
 	win/$(DEPDIR)/$(am__dirstamp)
 
-libFileDialog.la: $(libFileDialog_la_OBJECTS) $(libFileDialog_la_DEPENDENCIES) $(EXTRA_libFileDialog_la_DEPENDENCIES) 
-	$(AM_V_OBJCXXLD)$(OBJCXXLINK) -rpath $(libdir) $(libFileDialog_la_OBJECTS) $(libFileDialog_la_LIBADD) $(LIBS)
+libFileDialog.la: $(libFileDialog_la_OBJECTS) $(libFileDialog_la_DEPENDENCIES) $(EXTRA_libFileDialog_la_DEPENDENCIES)
+	$(AM_V_CXXLD)$(CXXLINK) -rpath $(libdir) $(libFileDialog_la_OBJECTS) $(libFileDialog_la_LIBADD) $(LIBS)
 
 mostlyclean-compile:
 	-rm -f *.$(OBJEXT)
-- 
2.7.0

